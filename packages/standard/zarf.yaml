kind: ZarfPackageConfig
metadata:
  name: uds-core
  description: "UDS Core"
  authors: "Defense Unicorns - Product"
  # x-release-please-start-version
  version: "0.1.0"
  # x-release-please-end

variables:
  - name: DOMAIN
    description: "Cluster domain"
    default: "uds.dev"

components:
  # Istio
  - name: istio-controlplane
    required: true
    import:
      path: ../../capabilities/istio

  - name: istio-admin-gateway
    required: true
    import:
      path: ../../capabilities/istio
    charts:
      - name: uds-istio-config
        valuesFiles:
          - "values/istio-admin-gateway.yaml"

  - name: istio-tenant-gateway
    required: true
    import:
      path: ../../capabilities/istio
    charts:
      - name: uds-istio-config
        valuesFiles:
          - "values/istio-tenant-gateway.yaml"

  - name: istio-passthrough-gateway
    required: true
    import:
      path: ../../capabilities/istio
    charts:
      - name: uds-istio-config
        valuesFiles:
          - "values/istio-passthrough-gateway.yaml"

  # Pepr the world
  - name: pepr-uds-core
    required: true
    import:
      path: ../../dist
      name: module

  # Neuvector
  - name: neuvector
    required: true
    import:
      path: ../../capabilities/neuvector

  - name: uds-neuvector-config
    required: true
    import:
      path: ../../capabilities/neuvector

  # Loki
  - name: loki
    required: true
    import:
      path: ../../capabilities/loki

  - name: uds-loki-config
    required: true
    import:
      path: ../../capabilities/loki