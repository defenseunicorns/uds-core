includes:
  - create: ./tasks/create.yaml
  - setup: ./tasks/setup.yaml
  - deploy: ./tasks/deploy.yaml
  - test: ./tasks/test.yaml
  - lint: ./tasks/lint.yaml
tasks:
  - name: setup-cluster
    actions:
      - task: setup:k3d-test-cluster

  - name: create-single-package
    actions:
      - task: create:single-package

  - name: create-standard-package
    actions:
      - task: create:standard-package

  - name: deploy-single-package
    actions:
      - task: deploy:single-package

  - name: test-single-package
    actions:
      - task: test:single-package

  - name: test-uds-core
    actions:
      - task: test:uds-core



  - name: dev
    actions:
      - description: "Create the K3d cluster"
        # renovate: datasource=github-tags depName=defenseunicorns/uds-k3d versioning=semver
        cmd: "zarf package deploy oci://defenseunicorns/uds-k3d:0.2.1-multi --confirm"
      - description: "Deploy the uds-core package with zarf dev deploy"
        cmd: zarf dev deploy packages/standard --flavor ${UDS_FLAVOR}
      - description: "Run Pepr in dev mode"
        cmd: npx pepr dev --confirm



  - name: lint
    actions:
      - task: lint:run