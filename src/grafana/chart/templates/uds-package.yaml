apiVersion: uds.dev/v1alpha1
kind: Package
metadata:
  name: grafana
  namespace: {{ .Release.Namespace }}
spec:
  network:
    expose:
      - name: grafana
        gateway: admin
        port: 80

    policies:
      allow:
        - name: tempo-ingress-writes
          direction: Ingress
          podLabels:
            app: grafana
          remoteNamespaceLabels:
            app.kubernetes.io/name: tempo
          remotePodLabels:
            app.kubernetes.io/name: tempo
          port: 9090
          protocol: TCP
