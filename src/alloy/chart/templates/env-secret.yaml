apiVersion: v1
kind: Secret
metadata:
  name: uds-config-env
  namespace: {{ .Release.Namespace }}
type: Opaque
stringData:
  UDS_CONFIG: "values" # Used as a placeholder to ensure valid secret with keys
  {{- if and .Values.s3Exporter.enabled .Values.s3Exporter.accessKey .Values.s3Exporter.secretKey }}
  AWS_ACCESS_KEY_ID: "{{ .Values.s3Exporter.accessKey }}"
  AWS_SECRET_ACCESS_KEY: "{{ .Values.s3Exporter.secretKey }}"
  {{- end }}
  {{- range $key, $value := .Values.secretEnv }}
  {{ $key }}: "{{ $value }}"
  {{- end }}
