kind: UDSBundle
metadata:
  name: uds-core-eks-nightly
  description: A UDS bundle for deploying EKS and UDS Core
  # x-release-please-start-version
  version: "0.15.1"
  # x-release-please-end

packages:
  - name: distro-eks
    path: ../packages
    ref: 0.15.1

  - name: ci-iac-aws
    path: ../packages/
    # x-release-please-start-version
    ref: 0.15.1
    # x-release-please-end

  - name: init
    repository: ghcr.io/defenseunicorns/packages/init
    # renovate: datasource=github-tags depName=defenseunicorns/zarf versioning=semver
    ref: v0.32.4

  - name: core
    path: ../packages/
    # x-release-please-start-version
    ref: 0.15.1
    # x-release-please-end
    overrides:
      istio-admin-gateway:
        uds-istio-config:
          variables:
            - name: ADMIN_TLS_CERT
              description: "The TLS cert for the admin gateway (must be base64 encoded)"
              path: tls.cert
            - name: ADMIN_TLS_KEY
              description: "The TLS key for the admin gateway (must be base64 encoded)"
              path: tls.key
      istio-tenant-gateway:
        uds-istio-config:
          variables:
            - name: TENANT_TLS_CERT
              description: "The TLS cert for the tenant gateway (must be base64 encoded)"
              path: tls.cert
            - name: TENANT_TLS_KEY
              description: "The TLS key for the tenant gateway (must be base64 encoded)"
              path: tls.key
